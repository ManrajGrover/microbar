!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.microbar=t()}(this,function(){function e(e){return(.5+Math.round(1/e)).toString()+"s"}function t(e){var t=document.createElement("div");if(t.style.backgroundColor=e,0==t.style.backgroundColor.length)throw new Error("Please check the color entered")}function n(){var e=document.createElement("div"),t={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n];return null}function r(){if(void 0==document.getElementById("microbarstyles")){var e=document.createElement("style");e.type="text/css",e.id="microbarstyles",e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i)),document.head.insertBefore(e,null)}}function o(o,i,a){r(),t(o);var s=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),l=e(a);s.className="microbar",d.classList.add("mprogress"),d.style.backgroundColor=o,d.style.width=i+"%",d.style.transition="width "+l+" ease, opacity 0.3s ease",c.classList.add("mshadow"),c.style.boxShadow="0 0 10px "+o,0==i&&(d.style.opacity=0),d.appendChild(c),s.appendChild(d);var u=n();if(null==u)throw new Error("Your browser is not supported.");return d.addEventListener(u,function(){var e=this.style.width;"100%"==e&&(this.style.opacity=0)}),{bar:s,progress:d,shadow:c}}var i=".microbar{width: 100%;height: 2px;z-index: 9999;top:0;background-color: transparent;}.microbar .mprogress{width: 0;height: 100%;background-color: #000000;}.microbar .mprogress .mshadow{width: 1%;position: relative;height: 100%;float: right;}";return function(n){if(n=n||{},n.hasOwnProperty("speed")&&("number"!=typeof n.speed||n.speed>10||n.speed<1))throw new Error("Speed should be an integer between 1 and 10.");if(n.hasOwnProperty("percentage")&&("number"!=typeof n.percentage||n.percentage>100||n.percentage<0))throw new Error("Percentage should be an integer between 0 and 100.");var r=n.percentage||0,i=n.color||"#000000",a=n.speed||10,s=o(i,r,a),d=s.bar,c=s.progress,l=s.shadow;return n.target?(d.style.position="relative",document.getElementById(n.target).insertBefore(d,document.getElementById(n.target).firstChild)):(d.style.position="fixed",document.getElementsByTagName("body")[0].appendChild(d)),{moveTo:function(e){if("number"!=typeof e||e>100||0>e)throw new Error("Percentage should be an integer between 0 and 100.");c.style.opacity=1,c.style.width=e+"%"},getColor:function(){return i},setColor:function(e){t(e),i=e,c.style.backgroundColor=e,l.style.boxShadow="0 0 10px "+e},getSpeed:function(){return a},setSpeed:function(t){if(t>10||1>t)throw new RangeError("Speed should be an integer between 1 and 10.");a=t,c.style.transition="width "+e(t)}}}});